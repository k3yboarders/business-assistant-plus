@using Microsoft.AspNetCore.Identity
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

@{
	ViewData["Title"] = "Kalkulator podatkowy";
}


@if (SignInManager.IsSignedIn(User))
{
	var applicationUser = await UserManager.GetUserAsync(User);

	     string[] names = new string[45];
names[1] = "Lekarz";
names[2] = "Lekarz stomatologii";
names[3] = "Weterynarz";
names[4] = "Technik dentystyczny";
names[5] = "Felczer, położna, pielęgniarka";
names[6] = "Tłumacz";
names[7] = "Nauczyciel korepetytor";
names[8] = "Usługi parkingowe";
names[9] = "Usługi reklamowe/badania opinii publicznej";
names[10] = "Usługi hotelarskie";
names[11] = "Usługi fotograficzne";
names[12] = "Reprodukcja komputerowych nośników informacji";
names[13] = "Obsługa central radio-taxi";
names[14] = "Pośrednictwo w sprzedaży hurtowej";
names[15] = "Pośrednictwo w sprzedaży hurtowej samochodów osobowych oraz części i akcesoriów do nich";
names[16] = "Pośrednictwo w sprzedaży motocykli oraz części i akcesoriów do nich";
names[17] = "Usługi w zakresie opieki zdrowotnej";
names[18] = "Usługi architektoniczne i inżynierskie";
names[19] = "Usługi w zakresie specjalistycznego projektowania";
names[20] = "Wydawanie pakietów gier komputerowych , z wyłączeniem publikowania gier komputerowych w trybie on-line";
names[21] = "Wydawanie pakietów oprogramowania systemowego";
names[22] = "Wydawanie pakietów oprogramowania użytkowego";
names[23] = "Wydawanie oprogramowania komputerowego pobieranego z Internetu";
names[24] = "Usługi doradztwa w sprawie sprzętu komputerowego";
names[25] = "Usługi związane z oprogramowaniem";
names[26] = "Usługi związane z doradztwem w zakresie oprogramowania";
names[27] = "Usługi w zakresie instalowania oprogramowania";
names[28] = "Usługi związane z zarządzaniem siecią i systemami informatycznymi";
names[29] = "Wynajem nieruchomości";
names[30] = "Świadczenie usług związanych z zakwaterowaniem";
names[31] = "Badania naukowe";
names[32] = "Wynajem środków transportu";
names[33] = "Gastronomia (w zakresie sprzedaży napojów z zawartością alkoholu powyżej 1.5%)";
names[34] = "Zwalczanie pożarów i zapobieganie im";
names[35] = "Edukacja";
names[36] = "Biblioteka, archiwum, muzeum";
names[37] = "Prowadzenie działalności wytwórczej";
names[38] = "Budownictwo";
names[39] = "Sprzedaż biletów, żetonów, znaczków pocztowych";
names[40] = "Gastronomia (z wyjątkiem alkoholu)";
names[41] = "Handel";
names[42] = "Rybołóstwo";
names[43] = "Produkcja zwierzęca";
names[44] = "Wytwór produktów roślinnych i zwierzęcych w sposób inny niż przemysłowy";
	int percentage = 0;
	if (applicationUser.TypeOfActivityId >= 1 && applicationUser.TypeOfActivityId <= 7)
	{
		percentage = 17;
	}
	else if (applicationUser.TypeOfActivityId >= 8 && applicationUser.TypeOfActivityId <= 16)
	{
		percentage = 15;
	}
	else if (applicationUser.TypeOfActivityId >= 17 && applicationUser.TypeOfActivityId <= 19)
	{
		percentage = 14;
	}
	else if (applicationUser.TypeOfActivityId >= 20 && applicationUser.TypeOfActivityId <= 25)
	{
		percentage = 12;
	}
	<div class="container align-middle">
		<h1 class="text-dark">Kalkulator podatkowy</h1>
		<form novalidate>
			<div>
				<label for="pit-input" class="lead text-black form-label fw-bold">Dochód w roku podatkowym</label>
				<input type="text" id="pit-input" class="form-control" required>
				<div class="invalid-feedback fw-bold lead fs-6">Proszę uzupełnić to pole</div>
			</div>

			<label for="polski-lad-modes" class="mt-2 lead text-dard fw-bold form-label">Sposób rozliczania</label>
			<select name="taxation-modes" id="polski-lad-modes" class="form-select">
				<option value="polski-lad">"Polski Ład"</option>
				<option value="polski-lad-2">"Polski Ład 2.0"</option>
			</select>


			<label for="taxation-types" class="mt-2 lead text-dark fw-bold form-label">Sposób opodatkowania</label>
			<select name="taxation-types" id="taxation-types" class="form-select">
				<option value="standard" selected>Standardowa skala podatkowa</option>
				<option value="line">Podatek liniowy</option>
				<option value="lumpSum">Ryczałt ewidencjonowany</option>
				<option value="taxationCard">Karta Podatkowa</option>
			</select>


			<div class="form-check healthcare-container mt-2" style="display: none;">
				<input type="checkbox" id="healthcare-reduction-input" class="form-check-input">
				<label for="healthcare-reduction-input" class="text-dark fw-bold form-check-label">Odliczenie składki zdrowotnej od przychodu/dochodu</label>
			</div>

			<div class="form-check mt-2 md-reduction-container">
				<input type="checkbox" id="middle-class-reduction-checkbox" class="form-check-input">
				<label for="middle-class-reduction-checkbox" class="text-dark fw-bold form-check-label">Ulga dla klasy średniej</label>
			</div>

			<label for="company-types" class="mt-2 lead text-dark text-start fw-bold form-label" style="display: none;">Rodzaj działalności/świadczonych usług</label>

			<input disabled value="@names[applicationUser.TypeOfActivityId]" > 
			<input type="hidden" value="@percentage" name="company-types" id="company-types" class="form-input">
			<label for="vat-percentages" class="lead text-dark text-start fw-bold form-label">Stawka podatku VAT</label>
			<select name="taxation-types" id="vat-percentages" class="form-select">
				<option value="23">23%</option>
				<option value="8">8%</option>
				<option value="5">5%</option>
				<option value="0">0%</option>
			</select>

			<label for="sales-income" class="lead text-dark text-start fw-bold form-label">Przychód Netto ze sprzedaży</label>
			<input type="text" id="sales-income" class="form-control">

			<label for="property-tax-cost" class="lead text-dark text-start fw-bold form-label">Koszt podatku od nieruchomości</label>
			<input type="text" id="property-tax-cost" class="form-control">

			<label for="civil-legal-tax-cost" class="lead text-dark text-start fw-bold form-label">Wysokość podatku od czynności cywilno-prawnych</label>
			<input type="text" id="civil-legal-tax-cost" class="form-control">

			<div class="tax-card-percent" style="display: none;">
				<label for="percentage-input" class="mt-2 lead text-dark text-start fw-bold form-label">Oprocentowanie ustalone przez <abbr title="Urząd Skarbowy">US</abbr></label>
				<input type="text" id="percentage-input" class="form-control" required>
				<div class="invalid-feedback fw-bold lead fs-6">Proszę uzupełnić to pole</div>
			</div>

			<button class="confirmation-button btn btn-success rounded fw-bold mt-2">Zatwierdź</button>
		</form>
		<table class="table table-hover" style="display: none;">
			<tbody>
			<tr>
				<td class="pit-value-cell lead fw-bold text-dark"><abbr title="Personal Income Tax">PIT</abbr></td>
				<td class="text-danger fw-bold lead"></td>
			</tr>
			<tr>
				<td class="healthcare-value-cell lead fw-bold text-dark">Składka zdrowotna roczna</td>
				<td class="text-danger fw-bold lead"></td>
			</tr>
			<tr>
				<td class="vat-value-cell lead fw-bold text-dark"><abbr title="Value-added Tax">VAT</abbr></td>
				<td class="text-danger fw-bold lead"></td>
			</tr>
			<tr>
				<td class="property-value-cell lead fw-bold text-dark">Podatek od nieruchomości</td>
				<td class="text-danger fw-bold lead"></td>
			</tr>
			<tr>
				<td class="civil-legal-value-cell lead fw-bold text-dark">Podatek od czynności cywilno-prawnych</td>
				<td class="text-danger fw-bold lead"></td>
			</tr>
			</tbody>
			<tfoot style="border-top: 3px solid black;">
			<tr>
				<td class="lead fw-bold">Razem</td>
				<td class="result-cell text-danger fw-bold lead"></td>
			</tr>
			</tfoot>
		</table>

	</div>

}
else
{
	<h2>Nie jesteś zalogowany!</h2>
}